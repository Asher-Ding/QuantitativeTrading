{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-4">
    {% set items_per_page = 10 %}
    {% set page = request.args.get('page', 1) | int %}
    {% set total_pages = (diaries|length // items_per_page) + 1 %}

    {% for diary in diaries[items_per_page*(page-1):items_per_page*page] %}
    <div class="bg-gray-100 rounded-xl p-4 mb-4">
        <h2 class="text-2xl font-bold mb-2">{{ diary.title }}</h2>
        <p class="text-gray-700">{{ diary.content[:100] }}...</p>
    </div>
    {% endfor %}

    {% if total_pages > 1 %}
    <nav class="flex justify-center items-center mt-8">
        {% if page > 1 %}
        <a href="?page={{ page - 1 }}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-l">
            Previous
        </a>
        {% endif %}

        <div class="flex gap-x-2">
            {% for p in range(1, total_pages+1) %}
            {% if p == page %}
            <span class="bg-blue-500 text-white py-2 px-4 rounded">
                {{ p }}
            </span>
            {% else %}
            <a href="?page={{ p }}" class="bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 rounded">
                {{ p }}
            </a>
            {% endif %}
            {% endfor %}
        </div>

        {% if page < total_pages %} <a href="?page={{ page + 1 }}"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-r">
            Next
            </a>
            {% endif %}
    </nav>
    {% endif %}
</div>

{% endblock %}